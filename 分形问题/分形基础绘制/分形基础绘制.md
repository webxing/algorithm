# ç®€ä¹¦åœ°å€ï¼šhttps://www.jianshu.com/p/4f46dc514dc4

# Vicsek fractal
åŸºæœ¬æ­£æ–¹å½¢åœ¨3Ã—3ç½‘æ ¼ä¸­åˆ†è§£ä¸º9ä¸ªè¾ƒå°çš„æ­£æ–¹å½¢ï¼Œç»˜åˆ¶è§’è½å¤„çš„å››ä¸ªæ­£æ–¹å½¢å’Œä¸­é—´æ­£æ–¹å½¢ã€‚å¯¹äºå‰©ä½™çš„äº”ä¸ªå­æ–¹æ ¼ä¸­çš„æ¯ä¸€ä¸ªï¼Œé€’å½’åœ°é‡å¤è¯¥è¿‡ç¨‹ã€‚Vicsekåˆ†å½¢æ˜¯åœ¨æ­¤ç¨‹åºçš„æé™ä¸‹è·å¾—çš„é›†åˆã€‚

![https://en.wikipedia.org/wiki/Vicsek_fractal](https://upload-images.jianshu.io/upload_images/10518780-f45baad249e71afe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
```js
// ç»˜åˆ¶å›¾å½¢
    draw(ctx, depth = this.depth, x = 0, y = 0, w = this.width, h = this.width) {

      ctx.fillStyle = '#ccc';

      if (depth <= 0 && depth != undefined || w <= 1 || h <= 1) {
        // ç»˜åˆ¶
        ctx.fillRect(x, y, w, h)
        return
      }

      this.depth = depth

      // è¦ç»˜åˆ¶çš„æ ¼å­å®¹å™¨ä¸­çš„å°æ ¼å­çš„å®½é«˜  å°†æ ¼å­å®¹å™¨åˆ’åˆ†ä¸º3 * 3 çš„çŸ©é˜µ æ ¹æ®ä½ç½®åˆ†åˆ«ç»˜åˆ¶å°æ ¼å­
      let w_3 = w / 3
      let h_3 = h / 3

      // é€’å½’ç»˜åˆ¶æ¯ä¸ªæ ¼å­çš„5ä¸ªæ–¹å‘
      this.draw(ctx, depth - 1,x, y, w_3, h_3)
      this.draw(ctx, depth - 1, x + 2 * w_3, y, w_3, h_3)
      this.draw(ctx, depth - 1, x + 2 * w_3, y + 2 * w_3, w_3, h_3)
      this.draw(ctx, depth - 1, x + w_3, y + w_3, w_3, h_3)
      this.draw(ctx, depth - 1, x, y + 2 * w_3, w_3, h_3) 
    }

```
åˆ†å½¢ç»“æœå¦‚ä¸‹å›¾ï¼š
![Vicsekåˆ†å½¢.gif](https://upload-images.jianshu.io/upload_images/10518780-00ec90c3bb6c07da.gif?imageMogr2/auto-orient/strip)



# Sierpinski carpet åˆ†å½¢
Sierpinski carpet å§‹äºä¸€ä¸ªæ­£æ–¹å½¢"æ–¹å½¢å‡ ä½•"ã€‚è¯¥æ­£æ–¹å½¢åœ¨3Ã—3ç½‘æ ¼ä¸­è¢«åˆ‡å‰²æˆ9ä¸ªä¸€è‡´çš„å­æ–¹å½¢ï¼Œåªç»˜åˆ¶ä¸­å¿ƒå­æ–¹ï¼Œç„¶åï¼Œæ— é™åˆ¶åœ°å°†ç›¸åŒçš„è¿‡ç¨‹é€’å½’åœ°åº”ç”¨äºå‰©ä½™çš„8ä¸ªå­æ–¹æ ¼ã€‚
![æµç¨‹å›¾](https://upload-images.jianshu.io/upload_images/10518780-d5faabcb2a6099bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

 ```js
 // ç»˜åˆ¶å›¾å½¢
    draw(ctx, depth = this.depth, x = 0, y = 0, w = this.width, h = this.width) {

      ctx.fillStyle = '#fff';

      // è¦ç»˜åˆ¶çš„æ ¼å­å®¹å™¨ä¸­çš„å°æ ¼å­çš„å®½é«˜  å°†æ ¼å­å®¹å™¨åˆ’åˆ†ä¸º3 * 3 çš„çŸ©é˜µ æ ¹æ®ä½ç½®åˆ†åˆ«ç»˜åˆ¶å°æ ¼å­
      let w_3 = w / 3
      let h_3 = h / 3

      if (depth <= 0 && depth != undefined || w <= 1 || h <= 1) return

      this.depth = depth


      // é€’å½’ç»˜åˆ¶9ä¸ªæ ¼å­
      for (let i = 0; i < 3; i++) {
        for (let j = 0; j < 3; j++) {
          if (i === 1 && j === 1) {
            // ä¸­å¿ƒçš„æ ¼å­ ç›´æ¥ç»˜åˆ¶
            ctx.fillRect( x + w_3, y + w_3, w_3, h_3)
          } else {
            // å…¶ä»–å…«ä¸ªè§’çš„æ ¼å­ é€’å½’
            this.draw(ctx, depth - 1, x + i * w_3, y + j * w_3, w_3, h_3)
          }
        }
      }
    }
 ```
åˆ†å½¢ç»“æœå¦‚ä¸‹å›¾ï¼š
![sierpinski_carpet_åˆ†å½¢.gif](https://upload-images.jianshu.io/upload_images/10518780-e0e9d17c95c077ca.gif?imageMogr2/auto-orient/strip)

# sierpinski triangle åˆ†å½¢
- ä»ç­‰è¾¹ä¸‰è§’å½¢å¼€å§‹ã€‚
- å°†å…¶ç»†åˆ†ä¸ºå››ä¸ªè¾ƒå°çš„å…¨ç­‰è¾¹ä¸‰è§’å½¢å¹¶ç§»é™¤ä¸­å¿ƒä¸‰è§’å½¢ã€‚
- é‡å¤æ­¥éª¤2ï¼Œæ°¸è¿œä¿ç•™æ¯ä¸ªå‰©ä½™çš„è¾ƒå°ä¸‰è§’å½¢ã€‚
![sierpinski triangle åˆ†å½¢](https://upload-images.jianshu.io/upload_images/10518780-a11010a25ef069ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![æ€è·¯](https://upload-images.jianshu.io/upload_images/10518780-7c43738faa20244e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
```js
    // ç»˜åˆ¶å›¾å½¢
    draw(ctx, depth = this.depth, Ax = 0, Ay = this.side, side = this.side, all = this.depth) {

      ctx.fillStyle = '#ccc';
      // è®¡ç®—ä¸‰è§’å½¢å…¶ä½™ä¸¤ç‚¹åæ ‡
      let Bx = Ax + side
      let By = Ay
      let Cx = Ax + side / 2
      let Cy = Ay - Math.sin( 2 * Math.PI / 360 * 60) * side

      if (depth <= 0 && depth != undefined || side <= 1) {
        // ä¼ å…¥ä¸‰ç‚¹åæ ‡
        this.triangle(ctx, Ax, Ay,Bx, By, Cx, Cy)
        return
      }

      // é€’å½’ åœ¨å·¦ä¸‹è§’åæ ‡ä¸º ï¼ˆAx, Ayï¼‰ä¸”è¾¹é•¿ä¸º side çš„æ­£æ–¹å½¢ä¸­ç»˜åˆ¶ä¸‰ä¸ªç­‰è¾¹ä¸‰è§’å½¢
      this.draw(ctx, depth - 1, Ax, Ay, side / 2, all)
      this.draw(ctx, depth - 1, (Ax + Bx) / 2, (Ay + By) / 2, side / 2, all)
      this.draw(ctx, depth - 1, (Ax + Cx) / 2, (Ay + Cy) / 2, side / 2, all)

    }
    // ç»˜åˆ¶ä¸‰è§’å½¢ ä¼ å…¥ä¸‰ç‚¹çš„åæ ‡
    triangle(ctx, x1, y1, x2, y2, x3, y3) {
      ctx.beginPath()
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.lineTo(x3, y3);
      ctx.closePath();
      ctx.fill();
    }
```
åˆ†å½¢ç»“æœå¦‚ä¸‹å›¾ï¼š
![sierpinski_triangle_åˆ†å½¢.gif](https://upload-images.jianshu.io/upload_images/10518780-1c9d91da40b82d00.gif?imageMogr2/auto-orient/strip)

# koch snowflake åˆ†å½¢
æ¦‚å¿µï¼šKoché›ªèŠ±å¯ä»¥é€šè¿‡ç­‰è¾¹ä¸‰è§’å½¢å¼€å§‹æ„å»ºï¼Œç„¶åé€’å½’åœ°æ”¹å˜æ¯ä¸ªçº¿æ®µï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
-  å°†çº¿æ®µåˆ’åˆ†ä¸ºä¸‰ä¸ªç›¸ç­‰é•¿åº¦çš„æ®µ
-  ç»˜åˆ¶ä¸€ä¸ªç­‰è¾¹ä¸‰è§’å½¢ï¼Œå…¶ä¸­ä»¥ç¬¬1æ­¥çš„ä¸­é—´éƒ¨åˆ†ä½œä¸ºåŸºå‡†ï¼Œå¹¶æŒ‡å‘å¤–éƒ¨ã€‚
-  ä»ç¬¬2æ­¥ä¸­åˆ é™¤ä½œä¸ºä¸‰è§’å½¢åº•è¾¹çš„çº¿æ®µã€‚

åœ¨è¯¥è¿‡ç¨‹çš„ä¸€æ¬¡è¿­ä»£ä¹‹åï¼Œå¾—åˆ°çš„å½¢çŠ¶æ˜¯å…­èŠ’æ˜Ÿçš„è½®å»“ã€‚

![koch snowflake åˆ†å½¢](https://upload-images.jianshu.io/upload_images/10518780-6f3ac77fd8e0398b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![æ€è·¯](https://upload-images.jianshu.io/upload_images/10518780-b9ff3c9a7ce7bf37.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


```js
    // ç»˜åˆ¶å›¾å½¢
    draw(ctx, depth = this.depth, x1 = 0, y1 = this.width / 2, side = this.width, deg = 0) {

      ctx.strokeStyle = '#fff';

      // è¦ç»˜åˆ¶çš„æ ¼å­å®¹å™¨ä¸­çš„å°æ ¼å­çš„å®½é«˜  å°†æ ¼å­å®¹å™¨åˆ’åˆ†ä¸º3 * 3 çš„çŸ©é˜µ æ ¹æ®ä½ç½®åˆ†åˆ«ç»˜åˆ¶å°æ ¼å­
      let w_3 = side / 3

      if (depth < 0 && depth != undefined || w_3 <= 1) {
        let x2 = x1 + Math.cos(2 * Math.PI / 360 * deg) * side
        let y2 = y1 - Math.sin(2 * Math.PI / 360 * deg) * side
        this.line(ctx, x1, y1, x2, y2)
        return
      }

      let x2 = x1 + Math.cos(2 * Math.PI / 360 * deg) * w_3
      let y2 = y1 - Math.sin(2 * Math.PI / 360 * deg) * w_3
      this.draw(ctx, depth - 1, x1, y1, w_3, deg)

      let x3 = x2 + w_3 * Math.cos(2 * Math.PI / 360 * (deg + 60))
      let y3 = y2 - w_3 * Math.sin(2 * Math.PI / 360 * (deg + 60))
      this.draw(ctx, depth - 1, x2, y2, w_3, deg + 60)

      let x4 = x3 + w_3 * Math.cos(2 * Math.PI / 360 * (deg - 60))
      let y4 = y3 - w_3 * Math.sin(2 * Math.PI / 360 * (deg - 60))
      this.draw(ctx, depth - 1, x3, y3, w_3, deg - 60)

      this.draw(ctx, depth - 1, x4, y4, w_3, deg)
    }

    // ç»˜åˆ¶çº¿æ¡
    line(ctx, x1, y1, x2, y2) {
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.closePath();
      ctx.stroke();
    }
```

åˆ†å½¢ç»“æœå¦‚ä¸‹å›¾ï¼š
![koch_snowflake_åˆ†å½¢.gif](https://upload-images.jianshu.io/upload_images/10518780-25760a8074f09982.gif?imageMogr2/auto-orient/strip)

# åˆ†å½¢ç»˜åˆ¶æ ‘ğŸŒ²
 ```js
    
    // ç»˜åˆ¶å›¾å½¢
    draw(ctx, depth = this.depth, x1 = this.width / 2, y1 = this.width, side = this.width, deg = 0) {

      ctx.strokeStyle = '#fff';
      let w_2 = side / 2

      if (depth < 0 && depth != undefined || w_2 <= 1) {
        let x2 = x1 - Math.sin(2 * Math.PI / 360 * deg) * side
        let y2 = y1 - Math.cos(2 * Math.PI / 360 * deg) * side
        this.line(ctx, x1, y1, x2, y2)
        return
      }


      // è·å–ä¸­ç‚¹åæ ‡
      let x2 = x1 - Math.sin(2 * Math.PI / 360 * deg) * w_2
      let y2 = y1 - Math.cos(2 * Math.PI / 360 * deg) * w_2
 
      // ä¸‹è¾¹çš„æ ‘æˆ
      this.line(ctx, x1, y1, x2, y2)
      // å·¦è¾¹çš„æ ‘æˆ
      this.draw(ctx, depth - 1, x2, y2, w_2, deg + this.splitDeg / 2)
      // å³è¾¹çš„æ ‘æˆ
      this.draw(ctx, depth - 1, x2, y2, w_2, deg - this.splitDeg / 2)
    }

    // ç»˜åˆ¶çº¿æ¡
    line(ctx, x1, y1, x2, y2) {
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.closePath();
      ctx.stroke();
    }
```

åˆ†å½¢ç»“æœå¦‚ä¸‹å›¾ï¼š
![ç»˜åˆ¶æ ‘_åˆ†å½¢.gif](https://upload-images.jianshu.io/upload_images/10518780-508d600bbac7daa9.gif?imageMogr2/auto-orient/strip)




